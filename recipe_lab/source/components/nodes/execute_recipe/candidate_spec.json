{
  "component_title": "Execute Recipe Node",
  "purpose_statement": "Registers a Drawflow node type that lets users specify and configure the execution of a sub-recipe with optional context overrides. It captures the path to a JSON recipe and any key/value overrides, storing them in the node’s configuration for serialization and downstream execution.",
  "core_requirements": [
    "Register node type \"execute_recipe\" using editor.registerNode",
    "Render an HTML form with an input for the sub-recipe path (`recipe_path`)",
    "Provide a UI control (e.g. a textarea or repeater) for defining `context_overrides` as a JSON object",
    "Bind each `df-*` element to `node.data.config.recipe_path` and `node.data.config.context_overrides` on creation and update",
    "Persist the `recipe_path` and `context_overrides` in the node’s data so serialization round-trips correctly",
    "Validate JSON in the context overrides input and fall back safely on parse errors",
    "Support updating the node’s configuration whenever the user edits the form"
  ],
  "implementation_considerations": [
    "Implement as a standalone ES module exporting `registerExecuteRecipe(editor)`",
    "Call `editor.registerNode('execute_recipe', {...})` with custom HTML including `<input df-recipe_path>` and `<textarea df-context_overrides>`",
    "In `onCreate(node)`, attach event listeners to update `node.data.config.recipe_path` from the input’s value",
    "In `onUpdate(node)` or on blur of the overrides textarea, attempt `JSON.parse` of the textarea; on success assign to `node.data.config.context_overrides`, on failure log `console.warn` and reset to `{}`",
    "Keep the HTML minimal and scoped under a container `<div class=\"node\">` to match existing node patterns",
    "Leverage existing serialization (drawflowToRecipe) which will read `node.data.config` into the recipe DSL"
  ],
  "component_dependencies": {
    "internal_components": [
      "canvas.js (Drawflow editor instance)",
      "modules/serialization.js for JSON round-trip"
    ],
    "external_libraries": [],
    "configuration_dependencies": []
  },
  "output_files": [
    {
      "path": "src/nodes/execute_recipe.js",
      "description": "ES module defining and exporting `registerExecuteRecipe(editor)`, registering the Execute Recipe node’s HTML and binding behavior"
    }
  ],
  "logging_requirements": {
    "debug": [],
    "info": []
  },
  "error_handling": [
    {
      "error_type": "JSONParseError",
      "error_message": "Failed to parse context_overrides JSON",
      "recovery_action": "Reset overrides to empty object and emit console warning"
    }
  ],
  "dependency_integration_considerations": [
    "Ensure the node’s name `execute_recipe` matches the recipe DSL step type and STEP_REGISTRY entry",
    "Coordinate with serialization.js to map `config.recipe_path` and `config.context_overrides` into the recipe JSON"
  ]
}